import useSession from'../views/game/useSession';
import{CHECK_PREFIX,decrypt}from'./crypto';
import{useEncryptionKey}from'./useEncryptionKey';
function cov_1o45va1cfp(){var path="/Users/siyiwang/Desktop/wsy/retro-board/frontend/src/crypto/useCanDecrypt.ts";var hash="d4a47ed039339d41f6776d317bc086afd34ac713";var global=window;var gcv="__coverage__";var coverageData={path:"/Users/siyiwang/Desktop/wsy/retro-board/frontend/src/crypto/useCanDecrypt.ts",statementMap:{"0":{start:{line:6,column:22},end:{line:6,column:34}},"1":{start:{line:7,column:16},end:{line:7,column:34}},"2":{start:{line:9,column:2},end:{line:11,column:3}},"3":{start:{line:10,column:4},end:{line:10,column:16}},"4":{start:{line:13,column:2},end:{line:13,column:58}}},fnMap:{"0":{name:"useCanDecrypt",decl:{start:{line:5,column:24},end:{line:5,column:37}},loc:{start:{line:5,column:40},end:{line:14,column:1}},line:5}},branchMap:{"0":{loc:{start:{line:9,column:2},end:{line:11,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:11,column:3}},{start:{line:9,column:2},end:{line:11,column:3}}],line:9},"1":{loc:{start:{line:9,column:6},end:{line:9,column:36}},type:"binary-expr",locations:[{start:{line:9,column:6},end:{line:9,column:14}},{start:{line:9,column:18},end:{line:9,column:36}}],line:9}},s:{"0":0,"1":0,"2":0,"3":0,"4":0},f:{"0":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d4a47ed039339d41f6776d317bc086afd34ac713"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1o45va1cfp=function(){return actualCoverage;};}return actualCoverage;}cov_1o45va1cfp();export default function useCanDecrypt(){cov_1o45va1cfp().f[0]++;const{session}=(cov_1o45va1cfp().s[0]++,useSession());const[key]=(cov_1o45va1cfp().s[1]++,useEncryptionKey());cov_1o45va1cfp().s[2]++;if((cov_1o45va1cfp().b[1][0]++,!session)||(cov_1o45va1cfp().b[1][1]++,!session.encrypted)){cov_1o45va1cfp().b[0][0]++;cov_1o45va1cfp().s[3]++;return true;}else{cov_1o45va1cfp().b[0][1]++;}cov_1o45va1cfp().s[4]++;return decrypt(session.encrypted,key)===CHECK_PREFIX;}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMW80NXZhMWNmcCIsImFjdHVhbENvdmVyYWdlIiwidXNlU2Vzc2lvbiIsIkNIRUNLX1BSRUZJWCIsImRlY3J5cHQiLCJ1c2VFbmNyeXB0aW9uS2V5IiwidXNlQ2FuRGVjcnlwdCIsImYiLCJzZXNzaW9uIiwicyIsImtleSIsImIiLCJlbmNyeXB0ZWQiXSwic291cmNlcyI6WyJ1c2VDYW5EZWNyeXB0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB1c2VTZXNzaW9uIGZyb20gJy4uL3ZpZXdzL2dhbWUvdXNlU2Vzc2lvbic7XG5pbXBvcnQgeyBDSEVDS19QUkVGSVgsIGRlY3J5cHQgfSBmcm9tICcuL2NyeXB0byc7XG5pbXBvcnQgeyB1c2VFbmNyeXB0aW9uS2V5IH0gZnJvbSAnLi91c2VFbmNyeXB0aW9uS2V5JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlQ2FuRGVjcnlwdCgpIHtcbiAgY29uc3QgeyBzZXNzaW9uIH0gPSB1c2VTZXNzaW9uKCk7XG4gIGNvbnN0IFtrZXldID0gdXNlRW5jcnlwdGlvbktleSgpO1xuXG4gIGlmICghc2Vzc2lvbiB8fCAhc2Vzc2lvbi5lbmNyeXB0ZWQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBkZWNyeXB0KHNlc3Npb24uZW5jcnlwdGVkLCBrZXkpID09PSBDSEVDS19QUkVGSVg7XG59XG4iXSwibWFwcGluZ3MiOiJzOUNBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlosTUFBTyxDQUFBRSxVQUFVLEtBQU0sMEJBQTBCLENBQ2pELE9BQVNDLFlBQVksQ0FBRUMsT0FBTyxLQUFRLFVBQVUsQ0FDaEQsT0FBU0MsZ0JBQWdCLEtBQVEsb0JBQW9CLENBRXJELGNBQWUsU0FBUyxDQUFBQyxhQUFhQSxDQUFBLENBQUcsQ0FBQU4sY0FBQSxHQUFBTyxDQUFBLE1BQ3RDLEtBQU0sQ0FBRUMsT0FBUSxDQUFDLEVBQUFSLGNBQUEsR0FBQVMsQ0FBQSxNQUFHUCxVQUFVLEVBQUUsRUFDaEMsS0FBTSxDQUFDUSxHQUFHLENBQUMsRUFBQVYsY0FBQSxHQUFBUyxDQUFBLE1BQUdKLGdCQUFnQixFQUFFLEVBQUNMLGNBQUEsR0FBQVMsQ0FBQSxNQUVqQyxHQUFJLENBQUFULGNBQUEsR0FBQVcsQ0FBQSxVQUFDSCxPQUFPLElBQUFSLGNBQUEsR0FBQVcsQ0FBQSxTQUFJLENBQUNILE9BQU8sQ0FBQ0ksU0FBUyxFQUFFLENBQUFaLGNBQUEsR0FBQVcsQ0FBQSxTQUFBWCxjQUFBLEdBQUFTLENBQUEsTUFDbEMsTUFBTyxLQUFJLENBQ2IsQ0FBQyxLQUFBVCxjQUFBLEdBQUFXLENBQUEsVUFBQVgsY0FBQSxHQUFBUyxDQUFBLE1BRUQsTUFBTyxDQUFBTCxPQUFPLENBQUNJLE9BQU8sQ0FBQ0ksU0FBUyxDQUFFRixHQUFHLENBQUMsR0FBS1AsWUFBWSxDQUN6RCJ9